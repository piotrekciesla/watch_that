import{d as x,r as k,u as y,o as l,c as d,w as D,v as F,a,b as c,F as I,e as L,f as b,t as h,g as _,h as f,i as g,j as v,R as $,k as W,l as w,m as R,n as E,p as S,q as P,s as V,x as Y,y as j,z as B,A as q,B as J}from"./vendor.5f8c9324.js";const z=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function s(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(r){if(r.ep)return;r.ep=!0;const n=s(r);fetch(r.href,n)}};z();var H="/watch_that/assets/tmdbLogo.9665a76b.svg";function Q(e,t){let s;return function(){clearTimeout(s);const o=arguments;s=setTimeout(function(){e.apply(o)},t)}}const G=a("h3",{class:"text-center"},"Watch that! \u{1F447}",-1),Z=x({setup(e){const t=k(),s=y(),o=Q(async()=>{await s.dispatch("searchMovies",t.value),window.scrollTo({top:0,behavior:"smooth"})},500);return(r,n)=>(l(),d(I,null,[G,D(a("input",{class:"neumorph-shaddow light:border-2 light:border-white light:bg-neutral-200 m-2 w-full rounded-2xl p-1 text-center focus-visible:border-0 focus-visible:outline-green-400 dark:bg-neutral-800 dark:text-white dark:placeholder-neutral-300",placeholder:"search",type:"text",onInput:n[0]||(n[0]=(...i)=>c(o)&&c(o)(...i)),"onUpdate:modelValue":n[1]||(n[1]=i=>t.value=i)},null,544),[[F,t.value]])],64))}}),K={class:"greetings"},X=a("h1",{class:"mb-5 text-center font-bold leading-tight text-neutral-600 md:text-left"},[a("div",{class:"select-none text-center text-5xl font-extrabold tracking-wider text-green-400"}," Good Movie "),a("div",{class:"select-none text-center font-extrabold tracking-widest"}," To "),a("div",{class:"select-none text-center text-4xl font-extrabold"}," Watch Tonight ")],-1),ee={class:"mb-4 text-center text-xl text-green-400"},te=x({props:{msg:null},setup(e){const t=L(),s=b(()=>t.name=="home");return(o,r)=>(l(),d("div",K,[X,a("h2",ee,h(e.msg),1),a("div",null,[c(s)?(l(),_(Z,{key:0})):f("",!0)])]))}});const se={class:"top-0 lg:sticky xl:sticky"},oe={class:"wrapper justify-center"},ae={class:"mb-4 text-center"},re=w("Home"),ne=w("Favorites"),ie=w("Account"),ce=w("Login"),le=a("footer",{class:"mt-20 rounded-xl p-3 text-center backdrop-blur-md"},[a("p",{class:"mb-4 font-bold"},"Watch that is powered by"),a("a",{class:"hover:cursor-pointer",href:"https://www.themoviedb.org"},[a("img",{class:"hover:cursor-pointer",src:H,alt:"tmdbLogo"})])],-1),ue=x({setup(e){const t=y();t.dispatch("fetchAccountData");const s=b(()=>t.getters.account);return(o,r)=>{var n,i;return l(),d(I,null,[a("header",se,[a("div",oe,[g(te,{msg:`HEY ${((n=c(s))==null?void 0:n.name)||((i=c(s))==null?void 0:i.username)||"You"}!`},null,8,["msg"]),a("nav",ae,[g(c($),{to:"/"},{default:v(()=>[re]),_:1}),c(s)?(l(),_(c($),{key:0,to:"/favorites"},{default:v(()=>[ne]),_:1})):f("",!0),c(s)?(l(),_(c($),{key:1,to:"/account"},{default:v(()=>[ie]),_:1})):f("",!0),c(s)?f("",!0):(l(),_(c($),{key:2,to:"/login"},{default:v(()=>[ce]),_:1}))])])]),g(c(W)),le],64)}}}),de="modulepreload",T={},me="/",U=function(t,s){return!s||s.length===0?t():Promise.all(s.map(o=>{if(o=`${me}${o}`,o in T)return;T[o]=!0;const r=o.endsWith(".css"),n=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${n}`))return;const i=document.createElement("link");if(i.rel=r?"stylesheet":de,r||(i.as="script",i.crossOrigin=""),i.href=o,document.head.appendChild(i),r)return new Promise((p,u)=>{i.addEventListener("load",p),i.addEventListener("error",u)})})).then(()=>t())},he=["src","alt"],C=x({props:{src:null,title:null},setup(e){return(t,s)=>(l(),d("img",{src:"https://image.tmdb.org/t/p/w500"+e.src,alt:e.title},null,8,he))}}),_e={class:"relative w-32 grow sm:w-56"},pe={class:"inline-block"},ve={class:"text-center text-xl font-bold"},fe={class:"text-l text-center font-medium"},ge=a("p",{class:"text-center"},"see details",-1),we={class:"absolute bottom-0.5 right-0.5 block rounded-lg p-2 text-amber-300 backdrop-blur backdrop-brightness-50"},xe={style:{"text-shadow":"2px 2px 2px rgba(0, 0, 0, 0.55)"}},be={props:{movie:Object},setup(e){return(t,s)=>(l(),d("li",_e,[g(C,{class:"w-full",src:e.movie.poster_path,title:e.movie.title},null,8,["src","title"]),g(c($),{to:{name:"details",params:{movieId:e.movie.id,movieTitle:encodeURI(e.movie.title.replaceAll(" ","-"))}},class:"absolute bottom-0 right-0 top-0 left-0 block block flex items-center justify-center p-2 text-white opacity-0 backdrop-blur backdrop-brightness-50 hover:opacity-100 active:opacity-100"},{default:v(()=>[a("div",pe,[a("h4",ve,h(e.movie.title),1),a("h5",fe," ("+h(e.movie.release_date.split("-")[0])+") ",1),ge])]),_:1},8,["to"]),a("div",we,[a("span",xe,h(e.movie.vote_average)+" / 10",1)])]))}},ye={class:"flex flex-wrap"},$e={props:{movies:{default:[],required:!0}},setup(e){return(t,s)=>(l(),d("ul",ye,[(l(!0),d(I,null,R(e.movies,o=>(l(),_(be,{movie:o},null,8,["movie"]))),256))]))}},ke={setup(e){const t=y();t.dispatch("fetchMovies");const s=b(()=>t.getters.movies());return(o,r)=>(l(),_($e,{movies:c(s)},null,8,["movies"]))}};var Me=(e,t)=>{const s=e.__vccOpts||e;for(const[o,r]of t)s[o]=r;return s};const Ie={},De={class:"h-10 rounded-md border px-6 font-semibold transition hover:bg-green-300 hover:text-black"};function Fe(e,t){return l(),d("button",De,[E(e.$slots,"default")])}var M=Me(Ie,[["render",Fe]]);const Le=a("h3",{class:"text-xl"},"Cast:",-1),Ae={class:"flex flex-wrap items-stretch justify-around"},Te={class:"m-4"},Ue={class:"neumorph-shaddow flex h-full w-40 flex-col flex-wrap items-center items-stretch overflow-hidden rounded-2xl text-center backdrop-brightness-110"},Ne=["src","alt"],Re={class:"p-2"},Se={class:"font-bold"},Ce={class:"text-center"},Oe=x({props:["cast"],setup(e){const t=e,s=k(!0),o=b(()=>s.value?t.cast.slice(0,6):t.cast);return(r,n)=>(l(),d("div",null,[Le,a("ul",Ae,[(l(!0),d(I,null,R(c(o),i=>(l(),d("li",Te,[a("div",Ue,[a("img",{class:"w-full",src:"https://image.tmdb.org/t/p/w138_and_h175_face"+i.profile_path,alt:i.name},null,8,Ne),a("div",Re,[a("div",Se,h(i.name),1),a("div",null,h(i.character),1)])])]))),256))]),a("div",Ce,[g(M,{class:"m-4 backdrop-blur-md",onClick:n[0]||(n[0]=i=>s.value=!s.value)},{default:v(()=>[w("show "+h(s.value?"more":"less"),1)]),_:1})])]))}}),We={key:0},Ee={class:"text-center text-3xl font-bold"},Pe={class:"text-center"},Ve={class:"m-4 text-center"},Ye=w("Add to Favorite"),je=w("Remove from Favorite"),Be=x({setup(e){const t=y(),s=b(()=>t.getters.movie),o=L(),r=S(),n=()=>t.dispatch("addMovieToFavorites",s.value.details),i=()=>t.dispatch("removeMovieFromFavorites",s.value.details),p=b(()=>t.getters.account);return P(s,u=>{u&&o.params.movieTitle!=encodeURI(u==null?void 0:u.details.title.replaceAll(" ","-"))&&r.replace({name:"details",params:{movieId:o.params.movieId,movieTitle:encodeURI(u==null?void 0:u.details.title.replaceAll(" ","-"))}})}),(u,lt)=>c(s)?(l(),d("div",We,[g(C,{class:"mx-auto w-64",src:c(s).details.poster_path,title:c(s).details.title},null,8,["src","title"]),a("h1",Ee,h(c(s).details.title),1),a("p",Pe,h(c(s).details.vote_average)+" / 10",1),a("div",Ve,[c(p)?(l(),_(M,{key:0,onClick:n},{default:v(()=>[Ye]),_:1})):f("",!0),c(p)?(l(),_(M,{key:1,onClick:i},{default:v(()=>[je]),_:1})):f("",!0)]),a("p",null,h(c(s).details.overview),1),c(s)?(l(),_(Oe,{key:0,cast:c(s).credits.cast},null,8,["cast"])):f("",!0)])):f("",!0)}}),qe={setup(e){const t=y(),o=L().params.movieId;return t.dispatch("fetchMovie",o),V(()=>t.dispatch("clearMovie")),(r,n)=>(l(),_(Be))}},Je={class:"flex-col"},ze=a("label",{for:"username"},"User name",-1),He=a("label",{for:"password"},"Password",-1),Qe=w("Login"),Ge=x({setup(e){const t=y(),s=S(),o=async()=>{const{success:i}=await t.dispatch("loginWithUserNamePassword",{username:r.value,password:n.value});if(!i){alert("Wrong user name or password");return}s.push({name:"home"})},r=k(""),n=k("");return(i,p)=>(l(),d("div",Je,[ze,D(a("input",{id:"username",placeholder:"User name",class:"light:bg-white mb-4 mt-2 w-full rounded-xl border-2 bg-transparent p-2 dark:bg-neutral-800 dark:text-white",type:"text","onUpdate:modelValue":p[0]||(p[0]=u=>r.value=u)},null,512),[[F,r.value]]),He,D(a("input",{id:"password",placeholder:"Password",class:"light:bg-white mb-4 mt-2 w-full rounded-xl border-2 bg-transparent p-2 dark:bg-neutral-800 dark:text-white",type:"password","onUpdate:modelValue":p[1]||(p[1]=u=>n.value=u)},null,512),[[F,n.value]]),g(M,{onClick:o},{default:v(()=>[Qe]),_:1})]))}}),O=Y({history:j(),routes:[{path:"/",name:"home",component:ke},{path:"/login",name:"login",component:Ge},{path:"/account",name:"account",component:()=>U(()=>import("./AccountPage.2796834f.js"),["/watch_that/assets/AccountPage.2796834f.js","assets/vendor.5f8c9324.js"]),meta:{requiresAuth:!0}},{path:"/movie/:movieId/:movieTitle?",name:"details",component:qe},{path:"/favorites",name:"favorites",meta:{requiresAuth:!0},component:()=>U(()=>import("./FavoritesPage.ab9f5c94.js"),["/watch_that/assets/FavoritesPage.ab9f5c94.js","/watch_that/assets/vendor.5f8c9324.js"])}]});O.beforeEach(e=>{if(e.meta.requiresAuth&&!sessionStorage.getItem("session_id"))return{name:"home"}});const m=B.create({baseURL:"https://api.themoviedb.org/3/",headers:{authorization:"bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI5YTBmNThjODIzMzY3Y2EzOTY0YWM2Y2E3ZTU3NDNiNCIsInN1YiI6IjYyMDQyNTBjMDc5MmUxMDA5OWQxMDI5NCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.hwLmYvMfpL-984Ms74HD9w4t7lDEh-Uoh570xWQULek"}}),Ze=async(e=1)=>(await m.get("discover/movie",{params:{page:e}})).data,Ke=async(e,t=1)=>(await m.get("/search/movie",{params:{page:t,query:e}})).data,Xe=async e=>(await m.get(`/movie/${e}`)).data,et=async e=>(await m.get(`/movie/${e}/credits`)).data,tt={state(){return{movies:[],movie:null}},mutations:{loadMovies(e,t){e.movies=t},loadMovie(e,t){e.movie=t}},getters:{movies:e=>(t="")=>e.movies.filter(s=>s.title.includes(t)),movie:e=>e.movie},actions:{async fetchMovies({commit:e},t){const s=await Ze(t);e("loadMovies",s.results)},async searchMovies({commit:e,dispatch:t},s){if(!s){t("fetchMovies");return}const o=await Ke(s);e("loadMovies",o.results)},async fetchMovie({commit:e},t){const[s,o]=await Promise.all([Xe(t),et(t)]);e("loadMovie",{details:s,credits:o})},async clearMovie({commit:e}){e("loadMovie",null)}}},st=async(e,t)=>{const s=(await m.get("/authentication/token/new")).data,o=(await m.post("/authentication/token/validate_with_login",{request_token:s.request_token,username:e,password:t})).data;await ot(o.request_token)},ot=async e=>{const{session_id:t}=(await m.post("/authentication/session/new",{request_token:e})).data;sessionStorage.setItem("session_id",t)},at=async()=>{const e=sessionStorage.getItem("session_id");await m.delete("/authentication/session",{data:{session_id:e}})},rt=async()=>{const e=sessionStorage.getItem("session_id");return(await m.get("/account",{params:{session_id:e}})).data},nt=async e=>{const t=sessionStorage.getItem("session_id");return(await m.get(`/account/${e}/favorite/movies`,{params:{session_id:t}})).data},N=async(e,t,s)=>{const o=sessionStorage.getItem("session_id");(await m.post(`/account/${e}/favorite`,{media_type:"movie",media_id:t,favorite:s},{params:{session_id:o}})).data},it={state(){return{userData:null,userFavoritesList:null}},mutations:{setUserData(e,t){e.userData=t},setUserFavoritesList(e,t){e.userFavoritesList=t}},getters:{account:({userData:e})=>e,userFavoritesList:({userFavoritesList:e})=>e},actions:{async fetchAccountData({commit:e}){const t=await rt();e("setUserData",t)},async loginWithUserNamePassword({dispatch:e},t){try{return await st(t.username,t.password),await e("fetchAccountData"),{success:!0}}catch{return{success:!1}}},async logOut({commit:e}){try{return await at(),e("setUserFavoritesList",null),e("setUserData",null),{success:!0}}catch{return{success:!1}}},async fetchFavorites({commit:e,dispatch:t,state:s}){if(s.userData===null){await t("fetchAccountData"),t("fetchFavorites");return}const{results:o}=await nt(s.userData.id);e("setUserFavoritesList",o)},async addMovieToFavorites({dispatch:e,state:t},s){if(t.userData===null){await e("fetchAccountData"),e("addMovieToFavorites");return}await N(t.userData.id,s.id,!0)},async removeMovieFromFavorites({dispatch:e,state:t},s){if(t.userData===null){await e("fetchAccountData"),e("removeMovieFromFavorites");return}await N(t.userData.id,s.id,!1)}}},ct=q({modules:{movies:tt,account:it}}),A=J(ue);A.use(O);A.use(ct);A.mount("#app");export{M,$e as _};
