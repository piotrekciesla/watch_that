import{d as w,r as $,u as y,o as l,c as m,w as D,v as L,a,b as i,F as I,e as F,f as b,t as v,g as h,h as g,i as f,j as _,R as k,k as P,l as x,T as N,m as R,n as V,p as Y,q as j,s as O,x as B,y as q,z as J,A as z,B as H,C as Q,D as G}from"./vendor.d485fcb1.js";const Z=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function s(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(r){if(r.ep)return;r.ep=!0;const n=s(r);fetch(r.href,n)}};Z();var K="/watch_that/assets/tmdbLogo.9665a76b.svg";function X(e,t){let s;return function(){clearTimeout(s);const o=arguments;s=setTimeout(function(){e.apply(o)},t)}}const ee=a("h3",{class:"text-center"},"Watch that! \u{1F447}",-1),te=w({setup(e){const t=$(),s=y(),o=X(async()=>{await s.dispatch("searchMovies",t.value),window.scrollTo({top:0,behavior:"smooth"})},500);return(r,n)=>(l(),m(I,null,[ee,D(a("input",{class:"neumorph-shaddow light:border-2 light:border-white light:bg-neutral-200 m-2 w-full rounded-2xl p-1 text-center focus-visible:border-0 focus-visible:outline-green-400 dark:bg-neutral-800 dark:text-white dark:placeholder-neutral-300",placeholder:"search",type:"text",onInput:n[0]||(n[0]=(...c)=>i(o)&&i(o)(...c)),"onUpdate:modelValue":n[1]||(n[1]=c=>t.value=c)},null,544),[[L,t.value]])],64))}}),se={class:"greetings"},oe=a("h1",{class:"mb-5 text-center font-bold leading-tight text-neutral-600 md:text-left"},[a("div",{class:"select-none text-center text-5xl font-extrabold tracking-wider text-green-400"}," Good Movie "),a("div",{class:"select-none text-center font-extrabold tracking-widest"}," To "),a("div",{class:"select-none text-center text-4xl font-extrabold"}," Watch Tonight ")],-1),ae={class:"mb-4 text-center text-xl text-green-400"},re=w({props:{msg:null},setup(e){const t=F(),s=b(()=>t.name=="home");return(o,r)=>(l(),m("div",se,[oe,a("h2",ae,v(e.msg),1),a("div",null,[i(s)?(l(),h(te,{key:0})):g("",!0)])]))}});const ne={class:"top-0 lg:sticky xl:sticky"},ie={class:"wrapper justify-center"},ce={class:"mb-4 text-center"},le=x("Home"),ue=x("Favorites"),de=x("Account"),me=x("Login"),_e=a("footer",{class:"mt-20 rounded-xl p-3 text-center backdrop-blur-md"},[a("p",{class:"mb-4 font-bold"},"Watch that is powered by"),a("a",{class:"hover:cursor-pointer",href:"https://www.themoviedb.org"},[a("img",{class:"hover:cursor-pointer",src:K,alt:"tmdbLogo"})])],-1),he=w({setup(e){const t=y();t.dispatch("fetchAccountData");const s=b(()=>t.getters.account);return(o,r)=>{var n,c;return l(),m(I,null,[a("header",ne,[a("div",ie,[f(re,{msg:`HEY ${((n=i(s))==null?void 0:n.name)||((c=i(s))==null?void 0:c.username)||"You"}!`},null,8,["msg"]),a("nav",ce,[f(i(k),{to:"/"},{default:_(()=>[le]),_:1}),i(s)?(l(),h(i(k),{key:0,to:"/favorites"},{default:_(()=>[ue]),_:1})):g("",!0),i(s)?(l(),h(i(k),{key:1,to:"/account"},{default:_(()=>[de]),_:1})):g("",!0),i(s)?g("",!0):(l(),h(i(k),{key:2,to:"/login"},{default:_(()=>[me]),_:1}))])])]),f(i(P)),_e],64)}}}),pe="modulepreload",U={},ve="/",C=function(t,s){return!s||s.length===0?t():Promise.all(s.map(o=>{if(o=`${ve}${o}`,o in U)return;U[o]=!0;const r=o.endsWith(".css"),n=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${n}`))return;const c=document.createElement("link");if(c.rel=r?"stylesheet":pe,r||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),r)return new Promise((u,d)=>{c.addEventListener("load",u),c.addEventListener("error",d)})})).then(()=>t())},fe=["src","alt"],W=w({props:{src:null,title:null},setup(e){return(t,s)=>(l(),m("img",{src:"https://image.tmdb.org/t/p/w500"+e.src,alt:e.title},null,8,fe))}}),ge={class:"relative w-32 grow sm:w-56"},xe={class:"inline-block"},we={class:"text-center text-xl font-bold"},be={class:"text-l text-center font-medium"},ye=a("p",{class:"text-center"},"see details",-1),ke={class:"absolute bottom-0.5 right-0.5 block rounded-lg p-2 text-amber-300 backdrop-blur backdrop-brightness-50"},$e={style:{"text-shadow":"2px 2px 2px rgba(0, 0, 0, 0.55)"}},Me={props:{movie:Object},setup(e){return(t,s)=>(l(),m("li",ge,[f(W,{class:"w-full",src:e.movie.poster_path,title:e.movie.title},null,8,["src","title"]),f(i(k),{to:{name:"details",params:{movieId:e.movie.id,movieTitle:encodeURI(e.movie.title.replaceAll(" ","-"))}},class:"absolute bottom-0 right-0 top-0 left-0 block block flex items-center justify-center p-2 text-white opacity-0 backdrop-blur backdrop-brightness-50 hover:opacity-100 active:opacity-100"},{default:_(()=>[a("div",xe,[a("h4",we,v(e.movie.title),1),a("h5",be," ("+v(e.movie.release_date.split("-")[0])+") ",1),ye])]),_:1},8,["to"]),a("div",ke,[a("span",$e,v(e.movie.vote_average)+" / 10",1)])]))}};var T=(e,t)=>{const s=e.__vccOpts||e;for(const[o,r]of t)s[o]=r;return s};const Ie={props:{movies:{default:[],required:!0}},setup(e){return(t,s)=>(l(),h(N,{class:"flex flex-wrap",name:"list",tag:"ul"},{default:_(()=>[(l(!0),m(I,null,R(e.movies,o=>(l(),h(Me,{key:o.id,movie:o},null,8,["movie"]))),128))]),_:1}))}};var De=T(Ie,[["__scopeId","data-v-2d59c991"]]);const Le={setup(e){const t=y();t.dispatch("fetchMovies");const s=b(()=>t.getters.movies());return(o,r)=>(l(),h(De,{movies:i(s)},null,8,["movies"]))}},Fe={},Te={class:"h-10 rounded-md border px-6 font-semibold transition hover:bg-green-300 hover:text-black"};function Ae(e,t){return l(),m("button",Te,[V(e.$slots,"default")])}var M=T(Fe,[["render",Ae]]);const Ue=e=>(Y("data-v-749a5d84"),e=e(),j(),e),Ce=Ue(()=>a("h3",{class:"text-xl",id:"cast"},"Cast:",-1)),Se={class:"neumorph-shaddow bg-theme flex h-full w-40 flex-col flex-wrap items-center items-stretch overflow-hidden rounded-2xl text-center backdrop-brightness-110"},Ne=["src","alt"],Re={class:"p-2"},Oe={class:"font-bold"},We={class:"text-center"},Ee=w({props:["cast"],setup(e){const t=e,s=$(!0),o=b(()=>s.value?t.cast.slice(0,6):t.cast),r=()=>s.value=!s.value;return(n,c)=>(l(),m("div",null,[Ce,f(N,{class:"flex flex-wrap items-stretch justify-around",name:"list",tag:"ul"},{default:_(()=>[(l(!0),m(I,null,R(i(o),u=>(l(),m("li",{key:u.id,class:"m-4"},[a("div",Se,[a("img",{class:"w-full",src:"https://image.tmdb.org/t/p/w138_and_h175_face"+u.profile_path,alt:u.name},null,8,Ne),a("div",Re,[a("div",Oe,v(u.name),1),a("div",null,v(u.character),1)])])]))),128))]),_:1}),a("div",We,[f(M,{class:"m-4 backdrop-blur-md",onClick:r},{default:_(()=>[x("show "+v(s.value?"more":"less"),1)]),_:1})])]))}});var Pe=T(Ee,[["__scopeId","data-v-749a5d84"]]);const Ve={key:0},Ye={class:"text-center text-3xl font-bold"},je={class:"text-center"},Be={class:"m-4 text-center"},qe=x("Add to Favorite"),Je=x("Remove from Favorite"),ze=w({setup(e){const t=y(),s=b(()=>t.getters.movie),o=F(),r=O(),n=()=>t.dispatch("addMovieToFavorites",s.value.details),c=()=>t.dispatch("removeMovieFromFavorites",s.value.details),u=b(()=>t.getters.account);return B(s,d=>{d&&o.params.movieTitle!=encodeURI(d==null?void 0:d.details.title.replaceAll(" ","-"))&&r.replace({name:"details",params:{movieId:o.params.movieId,movieTitle:encodeURI(d==null?void 0:d.details.title.replaceAll(" ","-"))}})}),(d,mt)=>i(s)?(l(),m("div",Ve,[f(W,{class:"mx-auto w-64",src:i(s).details.poster_path,title:i(s).details.title},null,8,["src","title"]),a("h1",Ye,v(i(s).details.title),1),a("p",je,v(i(s).details.vote_average)+" / 10",1),a("div",Be,[i(u)?(l(),h(M,{key:0,onClick:n},{default:_(()=>[qe]),_:1})):g("",!0),i(u)?(l(),h(M,{key:1,onClick:c},{default:_(()=>[Je]),_:1})):g("",!0)]),a("p",null,v(i(s).details.overview),1),i(s)?(l(),h(Pe,{key:0,cast:i(s).credits.cast},null,8,["cast"])):g("",!0)])):g("",!0)}}),He={setup(e){const t=y(),o=F().params.movieId;return t.dispatch("fetchMovie",o),q(()=>t.dispatch("clearMovie")),(r,n)=>(l(),h(ze))}},Qe={class:"flex-col"},Ge=a("label",{for:"username"},"User name",-1),Ze=a("label",{for:"password"},"Password",-1),Ke=x("Login"),Xe=w({setup(e){const t=y(),s=O(),o=async()=>{const{success:c}=await t.dispatch("loginWithUserNamePassword",{username:r.value,password:n.value});if(!c){alert("Wrong user name or password");return}s.push({name:"home"})},r=$(""),n=$("");return(c,u)=>(l(),m("div",Qe,[Ge,D(a("input",{id:"username",placeholder:"User name",class:"light:bg-white mb-4 mt-2 w-full rounded-xl border-2 bg-transparent p-2 dark:bg-neutral-800 dark:text-white",type:"text","onUpdate:modelValue":u[0]||(u[0]=d=>r.value=d)},null,512),[[L,r.value]]),Ze,D(a("input",{id:"password",placeholder:"Password",class:"light:bg-white mb-4 mt-2 w-full rounded-xl border-2 bg-transparent p-2 dark:bg-neutral-800 dark:text-white",type:"password","onUpdate:modelValue":u[1]||(u[1]=d=>n.value=d)},null,512),[[L,n.value]]),f(M,{onClick:o},{default:_(()=>[Ke]),_:1})]))}}),E=J({history:z(),routes:[{path:"/",name:"home",component:Le},{path:"/login",name:"login",component:Xe},{path:"/account",name:"account",component:()=>C(()=>import("./AccountPage.2479a2b4.js"),["/watch_that/assets/AccountPage.2479a2b4.js","/watch_that/assets/vendor.d485fcb1.js"]),meta:{requiresAuth:!0}},{path:"/movie/:movieId/:movieTitle?",name:"details",component:He},{path:"/favorites",name:"favorites",meta:{requiresAuth:!0},component:()=>C(()=>import("./FavoritesPage.ccac3e2c.js"),["/watch_that/assets/FavoritesPage.ccac3e2c.js","/watch_that/assets/vendor.d485fcb1.js"])}]});E.beforeEach(e=>{if(e.meta.requiresAuth&&!sessionStorage.getItem("session_id"))return{name:"home"}});const p=H.create({baseURL:"https://api.themoviedb.org/3/",headers:{authorization:"bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI5YTBmNThjODIzMzY3Y2EzOTY0YWM2Y2E3ZTU3NDNiNCIsInN1YiI6IjYyMDQyNTBjMDc5MmUxMDA5OWQxMDI5NCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.hwLmYvMfpL-984Ms74HD9w4t7lDEh-Uoh570xWQULek"}}),et=async(e=1)=>(await p.get("discover/movie",{params:{page:e}})).data,tt=async(e,t=1)=>(await p.get("/search/movie",{params:{page:t,query:e}})).data,st=async e=>(await p.get(`/movie/${e}`)).data,ot=async e=>(await p.get(`/movie/${e}/credits`)).data,at={state(){return{movies:[],movie:null}},mutations:{loadMovies(e,t){e.movies=t},loadMovie(e,t){e.movie=t}},getters:{movies:e=>(t="")=>e.movies.filter(s=>s.title.includes(t)),movie:e=>e.movie},actions:{async fetchMovies({commit:e},t){const s=await et(t);e("loadMovies",s.results)},async searchMovies({commit:e,dispatch:t},s){if(!s){t("fetchMovies");return}const o=await tt(s);e("loadMovies",o.results)},async fetchMovie({commit:e},t){const[s,o]=await Promise.all([st(t),ot(t)]);e("loadMovie",{details:s,credits:o})},async clearMovie({commit:e}){e("loadMovie",null)}}},rt=async(e,t)=>{const s=(await p.get("/authentication/token/new")).data,o=(await p.post("/authentication/token/validate_with_login",{request_token:s.request_token,username:e,password:t})).data;await nt(o.request_token)},nt=async e=>{const{session_id:t}=(await p.post("/authentication/session/new",{request_token:e})).data;sessionStorage.setItem("session_id",t)},it=async()=>{const e=sessionStorage.getItem("session_id");await p.delete("/authentication/session",{data:{session_id:e}})},ct=async()=>{const e=sessionStorage.getItem("session_id");return(await p.get("/account",{params:{session_id:e}})).data},lt=async e=>{const t=sessionStorage.getItem("session_id");return(await p.get(`/account/${e}/favorite/movies`,{params:{session_id:t}})).data},S=async(e,t,s)=>{const o=sessionStorage.getItem("session_id");(await p.post(`/account/${e}/favorite`,{media_type:"movie",media_id:t,favorite:s},{params:{session_id:o}})).data},ut={state(){return{userData:null,userFavoritesList:null}},mutations:{setUserData(e,t){e.userData=t},setUserFavoritesList(e,t){e.userFavoritesList=t}},getters:{account:({userData:e})=>e,userFavoritesList:({userFavoritesList:e})=>e},actions:{async fetchAccountData({commit:e}){const t=await ct();e("setUserData",t)},async loginWithUserNamePassword({dispatch:e},t){try{return await rt(t.username,t.password),await e("fetchAccountData"),{success:!0}}catch{return{success:!1}}},async logOut({commit:e}){try{return await it(),e("setUserFavoritesList",null),e("setUserData",null),{success:!0}}catch{return{success:!1}}},async fetchFavorites({commit:e,dispatch:t,state:s}){if(s.userData===null){await t("fetchAccountData"),t("fetchFavorites");return}const{results:o}=await lt(s.userData.id);e("setUserFavoritesList",o)},async addMovieToFavorites({dispatch:e,state:t},s){if(t.userData===null){await e("fetchAccountData"),e("addMovieToFavorites");return}await S(t.userData.id,s.id,!0)},async removeMovieFromFavorites({dispatch:e,state:t},s){if(t.userData===null){await e("fetchAccountData"),e("removeMovieFromFavorites");return}await S(t.userData.id,s.id,!1)}}},dt=Q({modules:{movies:at,account:ut}}),A=G(he);A.use(E);A.use(dt);A.mount("#app");export{M,De as a};
